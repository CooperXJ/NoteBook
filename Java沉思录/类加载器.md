类加载器的层次结构

![image-20200712211034088](https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200712211035.png)



类的加载模式：

代理模式：交给其他加载器加载指定的类

**一般类的加载模式都是双亲委托机制**

双亲委托机制：

​	某个特定的类加载器接收到加载某个类的请求之后，自己不会立刻去加载这个类，而是先去自己的父类加载器去查看其父类加载器是否可以对该类进行加载，依次往上传递，直到最顶层的父类。

​	**目的：为了保护Java核心库的安全**



tomact服务器加载类的话与传统的类加载器的加载顺序不同，它是先调用自己的类加载器，如果不合适的话会传递给其父类类加载器。与传统的类加载器加载方向相反。



**不同类加载器加载同一个类会被JVM认为是两个不同的类**



未来安全起见，可以将类进行加密操作，然后在类加载器中对该类进行解密重新进行加载。常见的操作比如：取反



### 常见双亲委托加载机制的缺陷以及解决办法：

![image-20200713100406838](https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200713100553.png)

